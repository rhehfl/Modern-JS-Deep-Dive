# 04장 변수

## 4.1 변수란 무엇인가? 왜 필요한가?

- 애플리케이션은 데이터를 다룬다. 변수는 데이터를 관리하기 위한 핵심 개념이다.

- 메모리는 데이터를 저장할 수 있는 메모리 셀의 집합체이다. 셀 하나의 크기는 1바이트 단위로, 데이터를 저장하거나 읽어 들인다.

- 셀은 고유의 메모리 주소를 갖는다. 메모리에 자정되는 모든 값은 2진수로 저장되는걸 기억하자

- 메모리 공간에 직접 접근하는것은 위험하다. 자바스크립트는 개발자의 직접적인 메모리제어를 허용하지 않는다.

- 변수는 하나의 값을 저장하기 위해 확보한 메모리 공간 또는 그 메모리 공간을 식별하기 위해 붙인 이름이다. 값의 위치를 가리키는 이름이다.

- 메모리 공간을 식별할 수 있는 고유 이름을 변수명, 저장된 값을 변수 값이라고 한다.

- 변수에 값을 저장하는걸 assignment(할당,대입,저장) 이라고 한다. 변수에 저장된 값을 읽어 들이는걸 참조 라고 한다.

> 참조는 항상 메모리를 읽는 다는 개념으로만 생각해서 변수에 자장된 값을 읽는 다는 느낌보다 설명이 필요하다는 생각이 들었다. 사실 생각해보면 같은 말이지만, 은근히 해깔리게 읽어진다.

## 4.2 식별자

- 변수 이름을 식별자라고도 한다. 식별자는 어떤 값을 구별해서 식별할 수 있는 고유 이름이다.

- 식별자는 어떤 값이 저장되어 있는 메모리 주소를 기억(저장)해야 한다.

| result -> 00x0669f913 : 30
| 식별자 메모리 주소 값

- 식별자는 메모리 주소에 붙인 이름이라고 할 수 있다.

- 변수, 함수, 클래스 등의 이름은 모두 식별자다. 메모리 상에 존재 하는 어떤 값을 식별할 수 있는 이름은 모두 식별자 라고 부른다.

## 4.3 변수 선언

- 변수 선언은 변수를 생성하는것을 말한다. 값을 저장하기 위한 메모리 공간을 확보 하고 변수 이름과 메모리 공간 주소를 연결 해서 값을 저장할 수 있게 준비하는것 이다.

- 변수를 사용하려면 반드시 선언이 필요하다.

- 선언할때는 var let const 키워드를 사요한다.

| var는 블록 레벨 스코프를 지원하지 않는다. 함수 레벨 스코프만 지원한다.

> 함수 실행 컨텍스트에서만 var가 지역변수로 가능하다라고 생각했다.

- let 과 const는 일단 나중에 하고 var 키워드를 살펴보면

```
var score;
```

- 위 선언문은 변수명을 등록하고 값을 저장할 메모리 공간을 확보한다.

- 값을 할당하지 않았고 확보된 메모리 공간은 비어있을것으로 예상하지만, js엔진에 의해 undefined 값이 암묵적으로 할당되어 초기화 된다.

- 이는 자바스크립트의 독특한 특징이다.

> c언어라면 변수선언시 메모리 어디를 사용해라~ 하고 해당 값에는 그전에 무언가 사용하던 가비지 데이터가 있을꺼다. js 그중에 var 키워드 선언에서는 자동으로 undefined를 할당한다고 한다.

- 변수선언은 1단계. 선언단계: 변수이름을 등록해 js엔진에 변수를 알린다.
- 2단계. 초기화 단계 : 메모라 공간을 확보하고 undefined를 할당해 초기화 한다.

- 변수 이름은 어디에 등록되는가? 모든 식별자는 실행 컨택스트에 등록된.

- 실행 컨택스트는 js엔진이 소스코드를 평가하고 실행하기 위한 환경을 제공하고 실행결과를 관리하는 영역이다.

- 실행 컨택스트를 통해 식별자와 스코프를 관리한다.

- 변수이름: 변수값. 키:밸류 형식인 객체로 실행컨텍스트에 저장되어 관리된다. 변수를 관리하는 메커니즘은. 스코프, 실행컨텍스트에서 살펴본다.

> 나는 실행컨텍스트를 https://www.youtube.com/watch?v=GIsr_r8XztQ 이 영상의 스택메모리에 잡히는 함수 호출시 생성되는 공간이라고 이해하고 있다. 작업이 메모리 공간을 말하는게 아니라는걸 알지만. 이렇게 생각하는게 직관적이라 좋아한다.

- 변수를 사용하려면 반드시 선언이 필요하다. 모든 식별자가 그렇다.

- 선언하지 않은 식별자에 접근하면, ReferenceError 참조에러 가 발생한다. 이는 js가 식별자를 통해 값을 참조하려 했지만 식별자를 찾을 수 없을때 발생하는 에러다.

## 4.4 변수 선언의 실행 시점과 변수 호이스팅

```
console.log(score);

var score;
```

- 변수 선언보다. log함수에서 score가 먼저 사용되었다. 참조에러가 발생할것 같지만 undefined가 출력된다.

- 변수 선언이 코드가 한줄씩 순차적으로 실행되는 런타임 시점이 아니라, 그 이전 단계에서 먼저 실행되기 때문이다.

- js엔진은 순차적으로 실행하기 앞서 소스코드 평가 과정을 거친다. 이때 모든 선언문을 찾아내 먼저 실행한다.

- 따라서 변수 선언이 어디 위치하는지 상관 없이 어디서든 변수를 참조한다.

- 이처럼 변수 선언문이 코드의 선두로 끌어 오렬진 것 처럼 동작하는 js고유의 특징을 변수 호이스팅 이라 한다.

- 또한 let, const, funtion, class 키워드를 사용해서 선언하는 모든 식별자도 호이스팅 된다.

> 이 부분은 지역 변수, 프로퍼티도 모두 식별하고 실행하나 생각했는데, 열심히 찾아본 결과 스코프레벨 안에서만 일어나는 현상이라고 한다.

> 전역 컨택스트가 파일내 funtion을 보고 호이스팅을 하지만, 함수 안의 const변수들을 호이스팅하지는 않는다고 한다. 각 스코프가 자기 안의 선언들을 호이스팅한다.

## 4.5 값의 할당

- = 할당연산자를 사용해 우변 값을 좌변의 변수에 할당한다.

- 주의할 점은 선언과 할당의 실행시점이 다르다는 점이다. 선언은 런타임이전에 먼저 실행되지만, 할당은 런타임에 실행한다.

- 또 주의할 점은 변수에 값을 할당할때는 이전 값 undefined가 저장되었던 메모리를 지우고 그 메모리 공간에 80을 새롭게 저장하는것이 아니라 새로운 메모리 공간을 확보하고 그곳에 80을 저장한다는 점이다.

> 나도 예전에 위 처럼 생각한적이 있었다. 그러다 js의 메모리 참조 테크톡하면서 당황했던적이 있다. 오늘 그 부분을 간단히 짚어봐서 좋았다.

## 4.6 값의 재할당

- 이미 값이 할당되어 있는 변수에 새로운 값을 다시 할당하는것을 말한다.

```
var score = 80;
```

- var 변수 선언시 undefined로 초기화 하기 때문에 위 코드도 엄밀히 말하면 재할당이라고 할 수 있다.

- 재할당 할수 없다면 변수가 아니라 상수라 한다. const 키워드가 상수만을 위해서 꼭 사용되는건 아니다. 15장 const에서 살펴보자

> 책의 예제를 가져오지는 않았는데 위에서 설명한 메모리내 공간을 지우지 않고 값을 쌓은후 식별자가 메모리 주소 값을 바꾸는게 인상깊었다.

- js같은 매니지드 언어는 메모리 할당 및 해제를 위한 메모리 기능을 언어차원에서 관리한다. 즉 개발자가 명시적으로 할당할 수 없다. 메모리해제는 가비지 콜렉터가 수행한다.

## 4.7 식별자 네이밍 규칙

> 이 부분은 너무 기초적이라 따로 정리하지는 않았습니다. 대충 카멜케이스와 파스칼케이스 사용하자로 요약할 수 있습니다.

# 감상문

> 변수와 메모리 형태는 프로그래밍 극 초반부터 항상 저를 고민하게 했던 부분들 입니다. 언어마다 그 작업들이 조금씩 다른데 js를 가장 많이 사용하면서도 그 작업 형태에 대해서는 자세히 파악하지 못했던거 같습니다.

> 이번 장에서 가장 인상깊은 부분은 식별자와 메모리주소, 실행컨텍스트에 해당 키:벨류가 저장되고 그 시점을 안것

> 또한 해깔리는 호이스팅시 어디까지 선언이 이루어지는지 찾아본것들 입니다.

> 해당 장을 보면서 스코프 장을 빨리 읽어봤으면 좋겠다는 생각이 들었습니다.
